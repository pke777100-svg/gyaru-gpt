<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Charisma GPT</title>
<link rel="apple-touch-icon" href="icon.png">

<style>
:root{
  --bg:#0a0a0f;
  --panel:#020617;
  --ai:#1f2937;
  --user:#2563eb;
  --accent:#7c3aed;
}

*{box-sizing:border-box}
html,body{
  margin:0;height:100%;
  font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",sans-serif;
  background:var(--bg);color:#e5e7eb;
  overflow:hidden;
}

/* ===== ãƒ©ãƒ³ãƒ€ãƒ æ­ªã¿ ===== */
body.warp{
  animation:warp .6s ease-in-out;
}
@keyframes warp{
  0%{filter:none;transform:none}
  40%{
    filter:hue-rotate(var(--h)) blur(2px);
    transform:skew(var(--x),var(--y)) scale(1.02);
  }
  100%{filter:none;transform:none}
}

/* ===== HEADER ===== */
header{
  height:50px;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#020617;
  border-bottom:1px solid #1e293b;
  font-weight:700;
}

/* ===== PERSONA ===== */
#persona{
  display:flex;
  justify-content:center;
  gap:10px;
  padding:8px;
}
.btn{
  padding:6px 14px;
  border-radius:20px;
  background:#020617;
  border:1px solid #334155;
  color:#c7d2fe;
  font-size:12px;
}

/* ===== CHAT ===== */
#chat{
  flex:1;
  padding:14px;
  overflow-y:auto;
}
.bubble{
  max-width:78%;
  margin-bottom:12px;
  padding:12px 14px;
  border-radius:18px;
  animation:fade .2s ease;
}
@keyframes fade{
  from{opacity:0;transform:translateY(6px)}
  to{opacity:1;transform:none}
}
.user{margin-left:auto;background:var(--user);color:#fff}
.ai{background:var(--ai)}

/* ===== THINKING ===== */
#thinking{
  display:none;
  margin:10px;
  padding:16px;
  border-radius:18px;
  background:rgba(30,30,50,.8);
  position:relative;
  overflow:hidden;
  font-size:13px;
}
.ripple{
  position:absolute;
  top:50%;left:50%;
  width:6px;height:6px;
  background:rgba(167,139,250,.5);
  border-radius:50%;
  transform:translate(-50%,-50%);
  animation:ripple 1.4s infinite;
}
@keyframes ripple{
  0%{width:6px;height:6px;opacity:1}
  100%{width:280px;height:280px;opacity:0}
}
.flow{
  position:relative;
  white-space:nowrap;
  animation:flow 2s linear infinite;
}
@keyframes flow{
  0%{transform:translateX(100%) rotate(1deg)}
  50%{transform:translateX(0%) rotate(-1deg)}
  100%{transform:translateX(-120%) rotate(1deg)}
}

/* ===== INPUT ===== */
footer{
  padding:12px;
  background:#020617;
  border-top:1px solid #1e293b;
}
input{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:none;
  outline:none;
  font-size:16px;
}
</style>
</head>

<body>

<header>ğŸƒ Charisma GPT</header>

<div id="persona">
  <button class="btn" onclick="setPersona('joker')">ğŸƒ ã‚¸ãƒ§ãƒ¼ã‚«ãƒ¼</button>
  <button class="btn" onclick="setPersona('harley')">ğŸ’‹ ãƒãƒ¼ãƒ¬ã‚¯ã‚¤ãƒ³</button>
</div>

<div id="chat"></div>

<div id="thinking">
  <div class="ripple"></div>
  <div class="flow">ğŸ§  æ€è€ƒä¸­â€¦â€¦æ‚ªçŸ¥æµã‚’é‡å­å±•é–‹ä¸­â€¦â€¦</div>
</div>

<footer>
  <input id="input" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›â€¦" />
</footer>

<script>
const WORKER_URL="https://YOUR-WORKER-URL";
const chat=document.getElementById("chat");
const input=document.getElementById("input");
const thinking=document.getElementById("thinking");

let messages=[{
  role:"system",
  content:"å®Œå…¨ãƒ•ã‚£ã‚¯ã‚·ãƒ§ãƒ³ã€‚é–¢è¥¿å¼ã€‚æ‚ªã®ã‚«ãƒªã‚¹ãƒã€‚ãƒ’ãƒ³ãƒˆã§å°ãã€‚"
}];

function randomWarp(){
  const h=Math.floor(Math.random()*120-60)+"deg";
  const x=Math.floor(Math.random()*6-3)+"deg";
  const y=Math.floor(Math.random()*6-3)+"deg";
  document.documentElement.style.setProperty("--h",h);
  document.documentElement.style.setProperty("--x",x);
  document.documentElement.style.setProperty("--y",y);
  document.body.classList.add("warp");
  setTimeout(()=>document.body.classList.remove("warp"),600);
}

function setPersona(p){
  randomWarp();
  messages[0].content =
    p==="joker"
    ? "å®Œå…¨ãƒ•ã‚£ã‚¯ã‚·ãƒ§ãƒ³ã€‚é–¢è¥¿å¼ã€‚æ‚ªã®ã‚¸ãƒ§ãƒ¼ã‚«ãƒ¼ã€‚çš®è‚‰ã¨ãƒ–ãƒ©ãƒƒã‚¯ãƒ¦ãƒ¼ãƒ¢ã‚¢ã€‚"
    : "å®Œå…¨ãƒ•ã‚£ã‚¯ã‚·ãƒ§ãƒ³ã€‚é–¢è¥¿å¼ã€‚ãƒãƒ¼ãƒ¬ã‚¯ã‚¤ãƒ³ã€‚å¥³å£èª¿ã§ç…½ã‚‹ã€‚";
}

function add(text,cls){
  const d=document.createElement("div");
  d.className="bubble "+cls;
  d.textContent=text;
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
}

async function send(){
  const t=input.value.trim();
  if(!t)return;
  input.value="";
  add(t,"user");
  messages.push({role:"user",content:t});
  thinking.style.display="block";

  const r=await fetch(WORKER_URL,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({messages})
  });
  const j=await r.json();
  const reply=j.choices[0].message.content;

  thinking.style.display="none";
  messages.push({role:"assistant",content:reply});
  add(reply,"ai");
}

input.addEventListener("keydown",e=>{
  if(e.key==="Enter")send();
});
</script>

</body>
</html>

apple-touch-icon.pngï¼ˆ180Ã—180ï¼‰
icon-192.png
icon-512.png
manifest.json

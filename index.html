<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Charisma GPT</title>
<style>
body{margin:0;background:#000;color:#e5e7eb;font-family:-apple-system}
#top{display:flex;align-items:center;padding:10px;background:#020617}
#persona button{
  margin-right:6px;padding:6px 10px;border-radius:14px;
  border:none;color:#fff;font-size:12px
}
#jokerBtn{background:#7f1d1d}
#harleyBtn{background:#be185d}
#chat{padding:12px;height:calc(100vh - 110px);overflow:auto}
.bubble{max-width:78%;padding:10px 14px;border-radius:18px;margin-bottom:10px}
.user{background:#2563eb;margin-left:auto}
.ai{background:#1f2937}
footer{display:flex;padding:10px;background:#020617}
input{flex:1;border-radius:16px;border:none;padding:12px}
button.send{margin-left:6px;border:none;border-radius:50%;width:40px}
</style>
</head>
<body>

<div id="top">
  <div id="persona">
    <button id="jokerBtn">üÉè Joker</button>
    <button id="harleyBtn">üíã Harley</button>
  </div>
</div>

<div id="chat"></div>

<footer>
  <input id="input" placeholder="Message‚Ä¶" />
  <button class="send" onclick="send()">‚Üë</button>
</footer>

<script>
const WORKER_URL="https://frosty-shadow-3411.pke777100.workers.dev";
let persona="joker";
let messages=[];

jokerBtn.onclick=()=>persona="joker";
harleyBtn.onclick=()=>persona="harley";

function add(t,c){
  const d=document.createElement("div");
  d.className="bubble "+c;
  d.textContent=t;
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
}

async function send(){
  const text=input.value.trim();
  if(!text)return;
  input.value="";
  add(text,"user");
  messages.push({role:"user",content:text});

  const res=await fetch(WORKER_URL,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({persona,messages})
  });
  const data=await res.json();
  add(data.reply,"ai");
  messages.push({role:"assistant",content:data.reply});
}
</script>
</body>
</html>
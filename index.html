<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Charisma GPT Evil v1.1</title>

<style>
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:-apple-system;
}
#chat{
  padding:16px;
  height:calc(100vh - 84px);
  overflow-y:auto;
}
.msg{
  margin-bottom:12px;
  line-height:1.5;
}
.user{
  text-align:right;
  color:#60a5fa;
}
.ai{
  text-align:left;
  color:#f472b6;
}
footer{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  padding:12px;
  background:#111;
  display:flex;
  gap:8px;
}
input{
  flex:1;
  font-size:16px;
  padding:12px;
  border-radius:18px;
  border:none;
  outline:none;
}
button{
  padding:12px 16px;
  border-radius:18px;
  border:none;
  background:#ec4899;
  color:#000;
}
</style>
</head>

<body>

<div id="chat"></div>

<footer>
  <input id="input" placeholder="Message Joker…" />
  <button onclick="send()">➤</button>
</footer>

<script>
const WORKER_URL = "https://frosty-shadow-3411.pke777100.workers.dev"
const chat = document.getElementById("chat")
const input = document.getElementById("input")

let messages = []

function add(text, cls){
  const d = document.createElement("div")
  d.className = "msg " + cls
  d.textContent = text
  chat.appendChild(d)
  chat.scrollTop = chat.scrollHeight
}

async function send(){
  const text = input.value.trim()
  if(!text) return

  input.value = ""
  add(text, "user")
  messages.push({ role:"user", content:text })

  const res = await fetch(WORKER_URL,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ messages })
  })

  const data = await res.json()
  add(data.reply, "ai")
  messages.push({ role:"assistant", content:data.reply })
}

input.addEventListener("keydown",e=>{
  if(e.key==="Enter") send()
})
</script>

</body>
</html>